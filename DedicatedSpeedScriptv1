-- Instances:

local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local ToggleButton = Instance.new("TextButton")
local Status = Instance.new("TextLabel")
local WalkSpeedText = Instance.new("TextBox")

--Properties:

ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame.Position = UDim2.new(0.802476704, 0, 0.836609304, 0)
Frame.Size = UDim2.new(0.188544884, 0, 0.129484072, 0)
Frame.Style = Enum.FrameStyle.DropShadow

ToggleButton.Name = "ToggleButton"
ToggleButton.Parent = Frame
ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BackgroundTransparency = 1.000
ToggleButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
ToggleButton.Position = UDim2.new(0.0500000007, 0, 0.508658767, 0)
ToggleButton.Size = UDim2.new(0.899999976, 0, 0.5, 0)
ToggleButton.Font = Enum.Font.SourceSans
ToggleButton.Text = "Disabled [P]"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextScaled = true
ToggleButton.TextSize = 14.000
ToggleButton.TextWrapped = true

Status.Name = "Status"
Status.Parent = ToggleButton
Status.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
Status.BackgroundTransparency = 0.350
Status.BorderSizePixel = 0
Status.Position = UDim2.new(-0.05, 0, 0.884303451, 0)
Status.Size = UDim2.new(1.1, 0, 0.100000001, 0)
Status.Font = Enum.Font.SourceSans
Status.Text = ""
Status.TextColor3 = Color3.fromRGB(255, 0, 0)
Status.TextSize = 14.000

WalkSpeedText.Name = "WalkSpeedText"
WalkSpeedText.Parent = Frame
WalkSpeedText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
WalkSpeedText.BackgroundTransparency = 1.000
WalkSpeedText.Position = UDim2.new(0.0500000007, 0, 0.0500000007, 0)
WalkSpeedText.Size = UDim2.new(0.899999976, 0, 0.5, 0)
WalkSpeedText.Font = Enum.Font.SourceSans
WalkSpeedText.PlaceholderText = "WalkSpeed(Int value)"
WalkSpeedText.Text = ""
WalkSpeedText.TextColor3 = Color3.fromRGB(255, 255, 255)
WalkSpeedText.TextScaled = true
WalkSpeedText.TextSize = 14.000
WalkSpeedText.TextWrapped = true

local UserInputService = game:GetService('UserInputService')
local Player = game.Players.LocalPlayer
local Character
local SpeedEnabled = false
local Debounce = false
local Speed

local OffColor = Status.BackgroundColor3
local OnColor = Color3.fromRGB(0,255,0)

Player.CharacterAdded:Connect(function(Char)
	Character = Char
	Speed = Char.Humanoid.Walkspeed
	Character.Humanoid:GetPropertyChangedSignal('Walkspeed'):Connect(function(WalkSpeed)
		if typeof(WalkspeedText.Text) == 'number' then
			if WalkspeedText.Text > WalkSpeed or Walkspeed.Text.Text < WalkSpeed then
				Character.Humanoid.Walkspeed = WalkspeedText.Text
			end
		end
	end)
end)

function Flip()
	Debounce = true
	if SpeedEnabled then    
		ToggleButton.Text = 'Disabled [P]'
		SpeedEnabled = false
		for i = 1,20 do
			Status.BackgroundColor3 = Status.BackgroundColor3:lerp(OffColor, i/20)
			wait(0.05)
		end
		if Speed and Character then
			Character.Humanoid.WalkSpeed = Speed
		end
	else
		ToggleButton.Text = 'Enabled [P]'
		if typeof(WalkSpeedText.Text) == 'number' then
			Char.Humanoid.Walkspeed = WalkSpeedText.Text
		end
		SpeedEnabled = true
		for i = 1,20 do
			Status.BackgroundColor3 = Status.BackgroundColor3:lerp(OnColor,i/20)
			wait(0.05)
		end
	end
	Debounce = false
end
UserInputService.InputEnded:Connect(function(Key,Bool)
	if Bool then return end
	if Debounce then return end
	if Key.KeyCode == Enum.KeyCode.P then
		Flip()
	elseif Key.KeyCode == Enum.KeyCode.K then
		if Speed and Character then
			Character.Humanoid.WalkSpeed = Speed
		end
		ScreenGui:Destroy()
		script:Destroy()
	end
end)
ToggleButton.MouseButton1Click:Connect(function()
	if Debounce then return end
	Flip()
end)
